<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinel | Yüksek Güvenlikli Yönetim Paneli</title>
    <!-- İkonlar -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS BAŞLANGICI --- */
        :root {
            --primary: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary: #0f172a;
            --bg-body: #f8fafc;
            --surface: #ffffff;
            --text-main: #334155;
            --text-muted: #94a3b8;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --sidebar-width: 280px;
            --header-height: 70px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            display: flex;
            height: 100vh;
            overflow: hidden;
            transition: background-color 0.5s;
        }

        /* Alarm Efektleri */
        @keyframes redAlertPulse {
            0% { box-shadow: inset 0 0 0 0 rgba(220, 38, 38, 0); }
            50% { box-shadow: inset 0 0 100px 30px rgba(220, 38, 38, 0.4); }
            100% { box-shadow: inset 0 0 0 0 rgba(220, 38, 38, 0); }
        }

        body.alert-mode {
            background-color: #1a0505;
            animation: redAlertPulse 2s infinite;
        }

        @keyframes orangeAlertPulse {
            0% { box-shadow: inset 0 0 0 0 rgba(245, 158, 11, 0); }
            50% { box-shadow: inset 0 0 100px 30px rgba(245, 158, 11, 0.4); }
            100% { box-shadow: inset 0 0 0 0 rgba(245, 158, 11, 0); }
        }

        body.insider-mode {
            background-color: #1c1004;
            animation: orangeAlertPulse 2s infinite;
        }

        body.alert-mode .card, body.alert-mode .panel-container,
        body.insider-mode .card, body.insider-mode .panel-container {
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            background-color: rgba(255, 255, 255, 0.95);
        }

        /* --- Sidebar --- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--secondary);
            color: white;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            z-index: 50;
        }

        .brand {
            height: var(--header-height);
            display: flex;
            align-items: center;
            padding: 0 24px;
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: 1px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .brand i { color: var(--primary); margin-right: 12px; }

        .menu { flex: 1; padding: 20px 0; overflow-y: auto; }

        .menu-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            padding: 0 24px;
            margin-bottom: 10px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .menu-item {
            padding: 12px 24px;
            display: flex;
            align-items: center;
            cursor: pointer;
            color: #cbd5e1;
            transition: all 0.2s;
            border-left: 4px solid transparent;
        }

        .menu-item:hover { background-color: rgba(255, 255, 255, 0.05); color: white; }
        
        .menu-item.active {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            border-left-color: var(--primary);
        }

        .menu-item i { width: 24px; margin-right: 12px; font-size: 1.1rem; }
        
        .menu-item.pulse-effect { color: #fca5a5; font-weight: 600; }
        .menu-item.pulse-effect:hover { color: #fee2e2; }
        
        .menu-item.insider-effect { color: #fcd34d; font-weight: 600; }
        .menu-item.insider-effect:hover { color: #fef3c7; }

        /* --- Main Content --- */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .top-bar {
            height: var(--header-height);
            background: var(--surface);
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
        }

        .page-title { font-size: 1.25rem; font-weight: 600; color: var(--secondary); }
        .system-status { display: flex; align-items: center; gap: 20px; font-size: 0.9rem; font-weight: 600; color: var(--text-muted); }
        .live-dot { width: 8px; height: 8px; background: var(--success); border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); } 70% { box-shadow: 0 0 0 6px rgba(16, 185, 129, 0); } 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); } }

        .content-area {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
            background-image: radial-gradient(#e2e8f0 1px, transparent 1px);
            background-size: 24px 24px;
        }

        /* --- Cards & Grid --- */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .card {
            background: var(--surface);
            padding: 24px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: transform 0.2s;
        }
        .card:hover { transform: translateY(-3px); }
        .card-val { font-size: 1.8rem; font-weight: 700; color: var(--secondary); }
        .card-label { font-size: 0.85rem; color: var(--text-muted); margin-top: 4px; }
        .card-icon-box {
            width: 48px; height: 48px;
            border-radius: 10px;
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem;
        }

        /* --- Table --- */
        .panel-container {
            background: var(--surface);
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }
        .panel-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        table { width: 100%; border-collapse: collapse; }
        th { background: #f8fafc; text-align: left; padding: 16px 24px; color: var(--text-muted); font-weight: 600; font-size: 0.85rem; text-transform: uppercase; }
        td { padding: 16px 24px; border-bottom: 1px solid #f1f5f9; color: var(--text-main); font-size: 0.95rem; }
        tr:hover td { background: #f8fafc; }
        tr { transition: all 0.3s ease; }

        /* --- Helpers --- */
        .btn { padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer; font-weight: 500; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 6px; }
        .btn-sm { padding: 6px 12px; font-size: 0.8rem; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-danger { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
        .btn-success { background: var(--success); color: white; }
        .btn-warning { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
        
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; }
        .badge-online { background: rgba(16, 185, 129, 0.15); color: var(--success); }
        .badge-offline { background: rgba(239, 68, 68, 0.15); color: var(--danger); }
        .badge-warn { background: rgba(245, 158, 11, 0.15); color: var(--warning); }
        
        .blocked-row { background-color: #fee2e2 !important; transition: all 0.5s ease; }
        .success-row { background-color: #dcfce7 !important; transition: all 0.5s ease; }
        .blocked-text { color: #dc2626; font-weight: 800; text-align: center; letter-spacing: 2px; animation: blink 0.5s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        /* --- Modals & Overlays --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 200;
            display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 12px;
            width: 400px; max-width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            text-align: center;
            animation: popIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* Talimat Dosyası Stili */
        .instruction-modal {
            width: 600px; max-width: 95%;
            background: #fff;
            font-family: 'Fira Code', monospace;
            text-align: left;
            border-top: 5px solid var(--primary);
        }
        .instruction-content {
            background: #f1f5f9; padding: 15px;
            border-radius: 6px; border: 1px solid #cbd5e1;
            font-size: 0.9rem; color: #334155; white-space: pre-wrap;
            margin-top: 15px;
            max-height: 400px; overflow-y: auto;
        }

        /* Full Screen Lockdown */
        .lockdown-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            color: #ef4444; font-family: 'Fira Code', monospace;
        }
        .lockdown-text { font-size: 3rem; font-weight: 800; animation: blink 1s infinite; text-align: center;}
        .lockdown-sub { font-size: 1.2rem; margin-top: 20px; color: #fff; }
        .restart-timer { font-size: 5rem; color: #fff; margin-top: 40px; font-weight: 800; }

        /* Terminal */
        .terminal-window {
            position: fixed; bottom: 20px; right: 20px;
            width: 600px; height: 400px;
            background-color: #0c0c0c;
            border: 1px solid #333;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: none;
            flex-direction: column;
            z-index: 300;
            font-family: 'Fira Code', monospace;
            overflow: hidden;
            animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .terminal-header { background: #1f1f1f; color: #ccc; padding: 8px 15px; display: flex; justify-content: space-between; }
        .terminal-body { flex: 1; padding: 15px; color: #22c55e; overflow-y: auto; font-size: 0.9rem; }
        .terminal-input-line { display: flex; align-items: center; padding: 10px; border-top: 1px solid #333; background: #000; }
        #terminal-input { background: transparent; border: none; color: #fff; flex: 1; outline: none; font-family: 'Fira Code', monospace; }
        .log-error { color: #ef4444; } .log-warn { color: #f59e0b; } .log-success { color: #22c55e; } .log-info { color: #3b82f6; }

        /* Notification Banner */
        .notification-banner {
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white; padding: 12px 32px; display: none;
            align-items: center; justify-content: space-between;
            animation: slideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); z-index: 101;
        }
        .notification-banner.alert { background: linear-gradient(90deg, #dc2626 0%, #991b1b 100%); animation: shake 0.5s; }
        .notification-banner.warn { background: linear-gradient(90deg, #d97706 0%, #b45309 100%); animation: shake 0.5s; }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }

        .locked-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(8px); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 50; color: white; }
        .lock-input { margin-top: 20px; padding: 12px 20px; font-size: 1.1rem; border-radius: 8px; border: 2px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; text-align: center; width: 280px; outline: none; transition: 0.3s; }
        
        /* Mobil Uyum */
        @media (max-width: 768px) {
            .sidebar { width: 0; overflow: hidden; }
            .sidebar.active { width: 240px; }
            .main-content { margin-left: 0; }
            .stats-grid { grid-template-columns: 1fr; }
            .terminal-window { width: 95%; right: 2.5%; }
        }
    </style>
</head>
<body>

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <div class="brand">
            <i class="fas fa-shield-halved"></i> SENTINEL
        </div>
        
        <div class="menu">
            <div class="menu-title">Yönetim</div>
            <div class="menu-item active" onclick="showSection('dashboard', this)">
                <i class="fas fa-layer-group"></i> <span>Genel Bakış</span>
            </div>
            <div class="menu-item" onclick="showSection('personnel', this)">
                <i class="fas fa-user-tie"></i> <span>Personel Listesi</span>
            </div>
            
            <div class="menu-title" style="margin-top: 20px;">Güvenlik</div>
            <div class="menu-item" onclick="showSection('applications', this)">
                <i class="fas fa-file-contract"></i> <span>Gizli Başvurular</span>
            </div>
            <div class="menu-item" onclick="showSection('lan', this)">
                <i class="fas fa-network-wired"></i> <span>Ağ Yönetimi (LAN)</span>
            </div>

            <div class="menu-title" style="margin-top: 20px;">Araçlar</div>
            <div class="menu-item" onclick="showSection('notes', this)">
                <i class="fas fa-clock"></i> <span>Görevler & Notlar</span>
            </div>
            <div class="menu-item" onclick="toggleTerminal(true)">
                <i class="fas fa-terminal"></i> <span>Sistem Terminali</span>
            </div>
            
            <div class="menu-title" style="margin-top: 20px;">Tatbikatlar</div>
            <!-- TALİMATLAR DOSYASI (YENİ) -->
            <div class="menu-item" onclick="showInstructions()">
                <i class="far fa-file-alt"></i> <span>Yapılması Gerekenler.txt</span>
            </div>

            <div class="menu-item pulse-effect" onclick="startSimulation()">
                <i class="fas fa-skull-crossbones"></i> <span>Dış Saldırı Sim.</span>
            </div>
            <div class="menu-item insider-effect" onclick="startInsiderSimulation()">
                <i class="fas fa-user-secret"></i> <span>İç Tehdit Sim.</span>
            </div>
        </div>

        <div class="user-panel">
            <div class="user-avatar">AD</div>
            <div>
                <div style="font-size: 0.9rem; font-weight: 600; color: white;">Admin</div>
                <div style="font-size: 0.75rem; color: var(--text-muted);">Süper Yetkili</div>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        
        <div id="notificationBanner" class="notification-banner">
            <div style="display:flex; align-items:center;">
                <i class="fas fa-exclamation-triangle" style="font-size: 1.2rem; margin-right: 15px;"></i>
                <div>
                    <div style="font-weight: 700;" id="notifTitle">Bildirim</div>
                    <div id="notifText" style="font-size: 0.9rem; opacity: 0.9;">İçerik...</div>
                </div>
            </div>
            <button onclick="closeBanner()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fas fa-times" style="font-size: 1.2rem;"></i></button>
        </div>

        <div class="top-bar">
            <h2 id="page-title" class="page-title">Genel Bakış</h2>
            <div class="system-status">
                <div id="clock">00:00:00</div>
                <div style="display:flex; align-items:center; gap:6px;">
                    <div class="live-dot" id="system-dot"></div> <span id="system-text">Sistem Aktif</span>
                </div>
            </div>
        </div>

        <div class="content-area">

            <!-- DASHBOARD -->
            <div id="dashboard" class="section">
                <div class="stats-grid">
                    <div class="card">
                        <div>
                            <div class="card-val" id="stat-personnel">124</div>
                            <div class="card-label">Toplam Personel</div>
                        </div>
                        <div class="card-icon-box"><i class="fas fa-users"></i></div>
                    </div>
                    <div class="card">
                        <div>
                            <div class="card-val" id="stat-uptime">99.9%</div>
                            <div class="card-label">Sistem Uptime</div>
                        </div>
                        <div class="card-icon-box" style="color:var(--success); background:rgba(16,185,129,0.1);"><i class="fas fa-server"></i></div>
                    </div>
                    <div class="card">
                        <div>
                            <div class="card-val" id="stat-lan">14</div>
                            <div class="card-label">Aktif LAN Cihazı</div>
                        </div>
                        <div class="card-icon-box" style="color:var(--warning); background:rgba(245,158,11,0.1);"><i class="fas fa-wifi"></i></div>
                    </div>
                    <div class="card">
                        <div>
                            <div class="card-val" id="stat-budget">₺845,000</div>
                            <div class="card-label">Aylık Bütçe</div>
                        </div>
                        <div class="card-icon-box" style="color:var(--danger); background:rgba(239,68,68,0.1);"><i class="fas fa-wallet"></i></div>
                    </div>
                </div>

                <div class="panel-container">
                    <div class="panel-header">
                        <h3><i class="fas fa-list-ul"></i> Son Sistem Logları</h3>
                        <button class="btn btn-sm btn-primary">Canlı Akış</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Zaman</th>
                                <th>Olay</th>
                                <th>Kullanıcı</th>
                                <th>Durum</th>
                            </tr>
                        </thead>
                        <tbody id="log-list"></tbody>
                    </table>
                </div>
            </div>

            <!-- Diğer Sayfalar -->
            <div id="personnel" class="section" style="display: none;">
                <div class="panel-container">
                    <div class="panel-header">
                        <h3>Kurum Personel Listesi</h3>
                        <button class="btn btn-sm btn-primary" onclick="showAlert('Yetki Hatası', 'Demo modunda yeni personel eklenemez.')"><i class="fas fa-plus"></i> Personel Ekle</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ad Soyad</th>
                                <th>Departman</th>
                                <th>Maaş</th>
                                <th>Perf. Puanı</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody id="personnel-list"></tbody>
                    </table>
                </div>
            </div>

            <div id="applications" class="section" style="display: none; position: relative; min-height: 500px;">
                <div id="security-lock" class="locked-overlay">
                    <div style="text-align:center;">
                        <i class="fas fa-lock" style="font-size: 5rem; color: #ef4444; margin-bottom: 20px;"></i>
                        <h2 style="font-size: 2rem; margin-bottom: 10px;">Çok Gizli Alan</h2>
                        <input type="password" id="admin-pass" class="lock-input" placeholder="Şifre Giriniz">
                        <br>
                        <button onclick="unlockSecuredArea()" class="btn btn-primary" style="margin-top: 20px; width: 200px;"><i class="fas fa-key"></i> Erişimi Aç</button>
                        <p id="auth-error" style="color: #ef4444; margin-top: 15px; display: none; font-weight:bold;"><i class="fas fa-exclamation-triangle"></i> Erişim Reddedildi</p>
                    </div>
                </div>
                <div id="secured-content" style="filter: blur(15px); pointer-events: none; transition: all 0.5s;">
                    <div class="panel-container">
                        <div class="panel-header" style="background: #fee2e2;">
                            <h3 style="color: #b91c1c;"><i class="fas fa-user-secret"></i> Bekleyen Gizli CV'ler</h3>
                        </div>
                        <table>
                            <thead>
                                <tr><th>Aday İsmi</th><th>Başvuru Pozisyonu</th><th>Deneyim</th><th>Güvenlik Puanı</th><th>Karar İşlemi</th></tr>
                            </thead>
                            <tbody id="applications-list"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="lan" class="section" style="display: none;">
                <div class="panel-container">
                    <div class="panel-header">
                        <h3><i class="fas fa-network-wired"></i> Yerel Ağ (LAN) Cihazları</h3>
                        <div>
                            <button id="scan-btn" class="btn btn-sm btn-warning" onclick="scanNetwork()"><i class="fas fa-bug"></i> Tara</button>
                            <button class="btn btn-sm btn-primary" onclick="renderLan()"><i class="fas fa-sync"></i> Yenile</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr><th>Cihaz / Hostname</th><th>IP Adresi</th><th>MAC Adresi</th><th>Ping</th><th>Durum</th><th>Müdahale</th></tr>
                        </thead>
                        <tbody id="lan-list"></tbody>
                    </table>
                </div>
            </div>

            <div id="notes" class="section" style="display: none;">
                <div class="panel-container" style="padding: 24px; margin-bottom: 30px;">
                    <h3 style="margin-bottom: 15px;">Yeni Hatırlatıcı Oluştur</h3>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <input type="text" id="note-input" placeholder="Notunuzu buraya girin..." style="flex: 2; padding: 12px; border: 1px solid #cbd5e1; border-radius: 6px;">
                        <input type="datetime-local" id="note-time" style="flex: 1; padding: 12px; border: 1px solid #cbd5e1; border-radius: 6px;">
                        <button onclick="addNote()" class="btn btn-success"><i class="fas fa-plus-circle"></i> Ekle & Alarm Kur</button>
                    </div>
                </div>
                <div id="notes-list" class="notes-grid"></div>
            </div>

        </div>
    </div>

    <!-- STANDART MODAL -->
    <div id="custom-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-title">Başlık</h3>
            <p id="modal-message">Mesaj burada olacak.</p>
            <div id="modal-input-container" style="display:none;">
                <input type="text" id="modal-input" class="modal-input" placeholder="Değer giriniz...">
            </div>
            <div class="modal-buttons">
                <button id="modal-cancel" class="btn btn-danger">İptal</button>
                <button id="modal-confirm" class="btn btn-primary">Tamam</button>
            </div>
        </div>
    </div>

    <!-- TALİMATLAR MODALI (YENİ) -->
    <div id="instructions-modal" class="modal-overlay">
        <div class="modal-content instruction-modal">
            <h3 style="color:var(--primary);"><i class="far fa-file-alt"></i> Yapılması Gerekenler.txt</h3>
            <div class="instruction-content">
=== SENTINEL GÜVENLİK PROTOKOLLERİ ===

[SENARYO 1: DIŞ SALDIRI (Kırmızı Alarm)]
Belirti: Sistem verileri bozulur, ekran kırmızı yanıp söner.
Çözüm:
1. Terminali açın.
2. 'scan_threat' komutuyla saldırganın IP adresini bulun.
3. 'firewall block [IP_ADRESI]' komutuyla engelleme yapın.
   (Örn: firewall block 192.168.5.5)

[SENARYO 2: İÇ TEHDİT (Turuncu Alarm)]
Belirti: Bütçe hızla azalır, ekran turuncu yanıp söner.
Çözüm:
1. Terminali açın.
2. 'audit_logs' komutunu yazıp şüpheli personeli bulun.
   (İpucu: "YÜKSEK HACİMLİ TRANSFER" uyarısını arayın)
3. 'suspend_user [AD SOYAD]' komutuyla hesabı dondurun.
   (Örn: suspend_user Ali Veli)

[UYARI]
Bütçe 0 TL'ye düşerse sistem iflas eder ve kilitlenir!
Otomatik yeniden başlatma 25 saniye sürer.
            </div>
            <div class="modal-buttons" style="justify-content: flex-end;">
                <button onclick="document.getElementById('instructions-modal').style.display='none'" class="btn btn-primary">Kapat</button>
            </div>
        </div>
    </div>

    <!-- LOCKDOWN OVERLAY (YENİ) -->
    <div id="lockdown-overlay" class="lockdown-overlay">
        <i class="fas fa-radiation fa-spin" style="font-size: 5rem; margin-bottom: 20px;"></i>
        <div class="lockdown-text">SİSTEM KİLİTLENDİ</div>
        <div class="lockdown-text" style="font-size: 2rem; margin-top:10px;">KRİTİK FİNANSAL HATA</div>
        <div class="lockdown-sub">Tüm varlıklar tüketildi. Sistem kurtarma başlatılıyor...</div>
        <div class="restart-timer" id="restart-timer">25</div>
    </div>

    <!-- TERMINAL PENCERESİ -->
    <div id="terminal" class="terminal-window">
        <div class="terminal-header">
            <span><i class="fas fa-terminal"></i> SENTINEL SECURE SHELL</span>
            <span style="cursor:pointer;" onclick="toggleTerminal(false)">X</span>
        </div>
        <div class="terminal-body" id="terminal-body">
            <div class="log-entry">Sentinel OS v2.4 başlatılıyor...</div>
            <div class="log-entry">Bağlantı kuruldu.</div>
            <div class="log-entry log-info">Mevcut komutları görmek için 'help' yazın.</div>
        </div>
        <div class="terminal-input-line">
            <span class="prompt-char">admin@sentinel:~$</span>
            <input type="text" id="terminal-input" autocomplete="off" placeholder="Komut giriniz...">
        </div>
    </div>

    <script>
        // --- VERİLER ---
        let personnel = [
            { id: 1, name: "Mehmet Öz", dept: "Sistem Yönetimi", salary: 45000, perf: 98 },
            { id: 2, name: "Ayşe Kaya", dept: "İnsan Kaynakları", salary: 32000, perf: 85 },
            { id: 3, name: "Ali Veli", dept: "Veritabanı", salary: 38000, perf: 92 },
            { id: 4, name: "Zeynep Su", dept: "Halkla İlişkiler", salary: 29000, perf: 78 },
        ];

        let applications = [
            { id: 201, name: "Ahmet Yılmaz", pos: "Siber İstihbarat Uzmanı", exp: "8 Yıl", score: 98 },
            { id: 202, name: "Elif Demir", pos: "Kriptografi Analisti", exp: "5 Yıl", score: 94 },
            { id: 203, name: "Caner Kara", pos: "Ağ Sızma Testçisi", exp: "12 Yıl", score: 99 }
        ];

        let lanDevices = [
            { id: 101, name: "Admin-PC-Main", ip: "192.168.1.10", mac: "00:1B:44:11:3A:B7", ping: "2ms", status: "online" },
            { id: 102, name: "Firewall-Gateway", ip: "192.168.1.1", mac: "AA:BB:CC:DD:EE:FF", ping: "1ms", status: "online" },
            { id: 103, name: "Unknown-Android", ip: "192.168.1.45", mac: "A2:4B:22:11:9A:00", ping: "124ms", status: "offline" },
            { id: 104, name: "Ofis-Yazıcı-01", ip: "192.168.1.200", mac: "B4:22:11:00:AA:11", ping: "8ms", status: "online" },
            { id: 105, name: "Misafir-Laptop", ip: "192.168.1.199", mac: "FF:FF:00:11:22:33", ping: "45ms", status: "online" },
        ];

        let notes = [];
        let systemLogs = [
            { time: "10:42:05", event: "Yönetici Girişi", user: "Admin (192.168.1.10)", status: "success", statusText: "Başarılı" },
            { time: "09:15:00", event: "Otomatik Yedekleme", user: "System Daemon", status: "success", statusText: "Tamamlandı" },
            { time: "03:45:12", event: "Port Taraması (LAN)", user: "192.168.1.45", status: "danger", statusText: "Engellendi" }
        ];

        // --- SİMÜLASYON DEĞİŞKENLERİ ---
        let simulationActive = false;
        let insiderSimulationActive = false;
        let attackerIP = "0.0.0.0";
        let glitchInterval = null;
        let budgetInterval = null;
        let currentBudget = 845000;
        let suspiciousUser = "";

        // --- YARDIMCI FONKSİYONLAR ---
        function showConfirm(title, message, callback) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-message').innerText = message;
            document.getElementById('modal-input-container').style.display = 'none';
            document.getElementById('custom-modal').style.display = 'flex';
            document.getElementById('modal-cancel').style.display = 'inline-flex';
            document.getElementById('modal-confirm').onclick = () => { closeModal(); if(callback) callback(true); };
            document.getElementById('modal-cancel').onclick = () => { closeModal(); if(callback) callback(false); };
        }

        function showPrompt(title, message, defaultValue, callback) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-message').innerText = message;
            const inputContainer = document.getElementById('modal-input-container');
            inputContainer.style.display = 'block';
            const input = document.getElementById('modal-input');
            input.value = defaultValue || '';
            document.getElementById('modal-cancel').style.display = 'inline-flex';
            document.getElementById('custom-modal').style.display = 'flex';
            input.focus();
            document.getElementById('modal-confirm').onclick = () => { const val = input.value; closeModal(); if(callback) callback(val); };
            document.getElementById('modal-cancel').onclick = () => { closeModal(); if(callback) callback(null); };
        }

        function showAlert(title, message) {
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-message').innerText = message;
            document.getElementById('modal-input-container').style.display = 'none';
            document.getElementById('custom-modal').style.display = 'flex';
            document.getElementById('modal-cancel').style.display = 'none';
            document.getElementById('modal-confirm').onclick = closeModal;
        }

        function closeModal() { document.getElementById('custom-modal').style.display = 'none'; }
        
        function showInstructions() {
            document.getElementById('instructions-modal').style.display = 'flex';
        }

        // --- LOGLAR ---
        function renderLogs() {
            const tbody = document.getElementById('log-list');
            tbody.innerHTML = "";
            systemLogs.forEach(log => {
                let badgeClass = log.status === 'success' ? 'badge-online' : (log.status === 'danger' ? 'badge-offline' : 'badge-warn');
                const tr = document.createElement('tr');
                tr.innerHTML = `<td style="font-family:monospace; color:#64748b;">${log.time}</td><td style="font-weight:600;">${log.event}</td><td>${log.user}</td><td><span class="badge ${badgeClass}">${log.statusText}</span></td>`;
                tbody.appendChild(tr);
            });
        }
        function addLog(event, user, status, statusText) {
            systemLogs.unshift({ time: new Date().toLocaleTimeString('tr-TR'), event, user, status, statusText });
            if(systemLogs.length > 10) systemLogs.pop();
            renderLogs();
        }

        // --- UI ---
        function showSection(sectionId, btnElement) {
            document.querySelectorAll('.section').forEach(el => el.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
            const titles = {'dashboard': 'Genel Bakış', 'personnel': 'Personel Yönetimi', 'applications': 'Yüksek Güvenlikli Alan', 'lan': 'Ağ Altyapısı (LAN)', 'notes': 'Görevler ve Bildirimler'};
            if(titles[sectionId]) document.getElementById('page-title').innerText = titles[sectionId];
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
        }

        function showBanner(title, text, type = 'normal') {
            const banner = document.getElementById('notificationBanner');
            document.getElementById('notifTitle').innerText = title;
            document.getElementById('notifText').innerText = text;
            banner.className = 'notification-banner';
            if(type === 'alert') banner.classList.add('alert');
            else if(type === 'warn') banner.classList.add('warn');
            banner.style.display = 'flex';
        }
        function closeBanner() { document.getElementById('notificationBanner').style.display = 'none'; }

        // --- TERMİNAL ---
        function toggleTerminal(show) {
            const term = document.getElementById('terminal');
            term.style.display = show ? 'flex' : 'none';
            if(show) document.getElementById('terminal-input').focus();
        }
        function terminalPrint(text, type = 'info') {
            const body = document.getElementById('terminal-body');
            const div = document.createElement('div');
            div.className = 'log-entry';
            if(type === 'error') div.className += ' log-error'; if(type === 'warn') div.className += ' log-warn'; if(type === 'success') div.className += ' log-success';
            div.innerText = `> ${text}`;
            body.appendChild(div);
            body.scrollTop = body.scrollHeight;
        }

        // --- SYSTEM LOCKDOWN (YENİ) ---
        function triggerSystemLockdown() {
            clearInterval(budgetInterval);
            document.getElementById('lockdown-overlay').style.display = 'flex';
            toggleTerminal(false);
            
            let timeLeft = 25;
            const timerEl = document.getElementById('restart-timer');
            
            const countdown = setInterval(() => {
                timeLeft--;
                timerEl.innerText = timeLeft;
                if(timeLeft <= 0) {
                    clearInterval(countdown);
                    location.reload(); // Sayfayı sıfırdan yükle
                }
            }, 1000);
        }

        // --- SİMÜLASYONLAR ---
        function startSimulation() {
            if(simulationActive || insiderSimulationActive) return alert("Zaten aktif bir tatbikat var!");
            simulationActive = true;
            attackerIP = `${Math.floor(Math.random()*200+50)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;
            document.body.classList.add('alert-mode');
            document.getElementById('system-dot').style.backgroundColor = 'red';
            document.getElementById('system-text').innerText = "SİSTEM SALDIRI ALTINDA";
            document.getElementById('system-text').style.color = "red";
            addLog("KRİTİK: Bilinmeyen Trafik Artışı", "WARNING", "danger", "Saldırı");
            showBanner("GÜVENLİK UYARISI", "Sisteme sızma girişimi tespit edildi!", "alert");
            toggleTerminal(true);
            terminalPrint("DIŞ SALDIRI SİMÜLASYONU BAŞLATILDI", "warn");
            terminalPrint("HEDEF: Saldırgan IP adresini tespit et ve engelle.", "info");
            
            glitchInterval = setInterval(() => {
                if(!simulationActive) return;
                document.getElementById('stat-personnel').innerText = Math.floor(Math.random() * 999);
                document.getElementById('stat-uptime').innerText = (Math.random() * 100).toFixed(1) + "%";
                document.getElementById('stat-lan').innerText = Math.floor(Math.random() * 500);
                document.getElementById('stat-budget').innerText = "ERROR";
                document.querySelectorAll('.card-val').forEach(el => { el.style.color = Math.random() > 0.5 ? '#ef4444' : '#334155'; });
            }, 100);
        }

        function endSimulation() {
            simulationActive = false;
            clearInterval(glitchInterval);
            document.getElementById('stat-personnel').innerText = personnel.length;
            document.getElementById('stat-uptime').innerText = "99.9%";
            document.getElementById('stat-lan').innerText = lanDevices.filter(x => x.status === 'online').length;
            document.getElementById('stat-budget').innerText = `₺${currentBudget.toLocaleString()}`;
            document.querySelectorAll('.card-val').forEach(el => el.style.color = '');
            document.body.classList.remove('alert-mode');
            resetSystemStatus();
            showBanner("TEHDİT ENGELLENDİ", "Başarılı savunma. Sistem güvenli.", "normal");
            addLog(`Saldırı Engellendi: ${attackerIP}`, "Admin", "success", "Korundu");
        }

        function startInsiderSimulation() {
            if(simulationActive || insiderSimulationActive) return alert("Zaten aktif bir tatbikat var!");
            insiderSimulationActive = true;
            suspiciousUser = personnel[Math.floor(Math.random() * personnel.length)].name;
            document.body.classList.add('insider-mode');
            document.getElementById('system-dot').style.backgroundColor = 'orange';
            document.getElementById('system-text').innerText = "BÜTÇE SIZINTISI TESPİT EDİLDİ";
            document.getElementById('system-text').style.color = "orange";
            addLog("ANOMALİ: Yetkisiz Fon Transferi", "System", "danger", "Kritik");
            showBanner("FİNANSAL ALARM", "Bütçeden yetkisiz para çıkışı var!", "warn");
            toggleTerminal(true);
            terminalPrint("İÇ TEHDİT SİMÜLASYONU BAŞLATILDI", "warn");
            terminalPrint("DURUM: Bir personel yetkilerini kötüye kullanıyor.", "info");
            
            budgetInterval = setInterval(() => {
                if(!insiderSimulationActive) return;
                currentBudget -= 100000;
                
                // KİLİTLENME KONTROLÜ
                if(currentBudget <= 0) {
                    currentBudget = 0;
                    document.getElementById('stat-budget').innerText = "₺0";
                    triggerSystemLockdown();
                    return;
                }

                document.getElementById('stat-budget').innerText = `₺${currentBudget.toLocaleString()}`;
                terminalPrint(`UYARI: -₺100,000 transfer edildi! Kalan: ₺${currentBudget.toLocaleString()}`, "error");
                const budgetCard = document.getElementById('stat-budget').parentElement.parentElement;
                budgetCard.style.backgroundColor = '#fee2e2';
                setTimeout(() => budgetCard.style.backgroundColor = '', 500);
            }, 5000);
        }

        function endInsiderSimulation() {
            insiderSimulationActive = false;
            clearInterval(budgetInterval);
            document.body.classList.remove('insider-mode');
            resetSystemStatus();
            showBanner("TEHDİT ETKİSİZ HALE GETİRİLDİ", `${suspiciousUser} hesabı donduruldu.`, "normal");
            addLog(`İç Tehdit Engellendi: ${suspiciousUser}`, "Admin", "success", "Donduruldu");
        }

        function resetSystemStatus() {
            document.getElementById('system-dot').style.backgroundColor = '#10b981';
            document.getElementById('system-text').innerText = "Sistem Aktif";
            document.getElementById('system-text').style.color = "#94a3b8";
        }

        // --- TERMİNAL GİRDİ ---
        document.getElementById('terminal-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const rawCmd = this.value.trim();
                const cmd = rawCmd.toLowerCase();
                terminalPrint(rawCmd, 'info');
                this.value = '';

                if (cmd === 'help') {
                    terminalPrint("KOMUT LİSTESİ:", "info");
                    terminalPrint("- status: Sistem durumu", "info");
                    terminalPrint("- clear: Ekranı temizle", "info");
                    if(simulationActive) {
                        terminalPrint("[SİMÜLASYON 1]", "warn");
                        terminalPrint("- scan_threat: Tehdit tara", "info");
                        terminalPrint("- firewall block [IP]: IP engelle", "info");
                    }
                    if(insiderSimulationActive) {
                        terminalPrint("[SİMÜLASYON 2]", "warn");
                        terminalPrint("- audit_logs: Logları denetle", "info");
                        terminalPrint("- suspend_user [Ad Soyad]: Kullanıcıyı dondur", "info");
                    }
                }
                else if (cmd === 'clear') { document.getElementById('terminal-body').innerHTML = ''; }
                else if (cmd === 'status') {
                    if(simulationActive) terminalPrint("KRİTİK: Dış saldırı devam ediyor!", "error");
                    else if(insiderSimulationActive) terminalPrint("KRİTİK: Bütçe sızıntısı var!", "warn");
                    else terminalPrint("Sistem stabil.", "success");
                }
                else if (simulationActive && cmd === 'scan_threat') {
                    terminalPrint("Tarama başlatılıyor...", "warn");
                    setTimeout(() => { terminalPrint(`KAYNAK TESPİT EDİLDİ: ${attackerIP}`, "error"); }, 1500);
                }
                else if (simulationActive && cmd.startsWith('firewall block')) {
                    const parts = cmd.split(' ');
                    if(parts.length < 3) terminalPrint("HATA: IP adresi eksik.", "error");
                    else if(parts[2] === attackerIP) {
                        terminalPrint(`${parts[2]} engellendi. Savunma başarılı.`, "success");
                        setTimeout(endSimulation, 1500);
                    } else terminalPrint("HATA: IP adresi tehdit ile uyuşmuyor.", "error");
                }
                else if (insiderSimulationActive && cmd === 'audit_logs') {
                    terminalPrint("Log analizi başlatılıyor...", "warn");
                    setTimeout(() => {
                        terminalPrint("ANALİZ SONUCU:", "info");
                        personnel.forEach(p => {
                            if(p.name === suspiciousUser) terminalPrint(`[!] ${p.name}: YÜKSEK HACİMLİ TRANSFER (ŞÜPHELİ)`, "error");
                            else terminalPrint(`[OK] ${p.name}: Normal aktivite`, "success");
                        });
                    }, 1500);
                }
                else if (insiderSimulationActive && cmd.startsWith('suspend_user')) {
                    const targetName = rawCmd.substring(13).trim(); 
                    if(!targetName) terminalPrint("HATA: Kullanıcı adı belirtilmedi.", "error");
                    else if(targetName.toLowerCase() === suspiciousUser.toLowerCase()) {
                        terminalPrint(`KULLANICI TESPİT EDİLDİ: ${suspiciousUser}`, "success");
                        terminalPrint("Hesap donduruluyor...", "warn");
                        setTimeout(endInsiderSimulation, 1500);
                    } else terminalPrint(`HATA: '${targetName}' adlı kullanıcı şüpheli değil.`, "error");
                }
                else terminalPrint("Bilinmeyen komut. 'help' yazın.", "error");
            }
        });

        // --- İŞLEVLER ---
        function renderPersonnel() {
            const tbody = document.getElementById('personnel-list');
            tbody.innerHTML = "";
            personnel.forEach(p => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td style="font-weight:600; color:var(--secondary);">${p.name}</td><td>${p.dept}</td><td style="font-family:monospace;">₺${p.salary.toLocaleString()} <i class="fas fa-pen" style="font-size:0.8rem; color:var(--primary); cursor:pointer; margin-left:8px;" onclick="editSalary(${p.id})"></i></td><td><span class="badge badge-online">${p.perf} Puan</span></td><td><button class="btn btn-sm btn-danger" onclick="firePerson(${p.id}, this)">İlişiği Kes</button></td>`;
                tbody.appendChild(tr);
            });
            document.getElementById('stat-personnel').innerText = personnel.length;
        }
        function firePerson(id, btnElement) {
            showConfirm("Personel Çıkarma", "Onaylıyor musunuz?", (confirmed) => {
                if(confirmed) {
                    const p = personnel.find(x => x.id === id);
                    if(p) addLog(`Personel Çıkarıldı: ${p.name}`, "Admin", "danger", "Silindi");
                    const row = btnElement.closest('tr');
                    row.style.opacity = "0";
                    setTimeout(() => { personnel = personnel.filter(x => x.id !== id); renderPersonnel(); }, 500);
                }
            });
        }
        function editSalary(id) {
            let p = personnel.find(x => x.id === id);
            showPrompt("Maaş Düzenle", "Yeni tutar:", p.salary, (val) => {
                if(val && !isNaN(val)) {
                    p.salary = parseInt(val);
                    addLog(`Maaş Güncelleme: ${p.name}`, "Admin", "warning", "Düzenlendi");
                    renderPersonnel();
                }
            });
        }
        function renderApplications() {
            const tbody = document.getElementById('applications-list');
            tbody.innerHTML = "";
            if(applications.length === 0) { tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:20px;">Bekleyen başvuru bulunmamaktadır.</td></tr>`; return; }
            applications.forEach(app => {
                const tr = document.createElement('tr');
                tr.innerHTML = `<td style="font-weight:bold;">${app.name}</td><td>${app.pos}</td><td>${app.exp}</td><td>${app.score}/100</td><td><button class="btn btn-sm btn-success" onclick="acceptApp(${app.id}, this)"><i class="fas fa-check"></i> Kabul Et</button> <button class="btn btn-sm btn-danger" onclick="rejectApp(${app.id}, this)"><i class="fas fa-times"></i> Reddet</button></td>`;
                tbody.appendChild(tr);
            });
        }
        function acceptApp(id, btnElement) {
            const app = applications.find(x => x.id === id); if(!app) return;
            addLog(`İşe Alım: ${app.name}`, "Admin", "success", "Onaylandı");
            const row = btnElement.closest('tr'); row.classList.add('success-row'); row.innerHTML = `<td colspan="5" style="text-align:center; color:green; font-weight:bold;"><i class="fas fa-check-circle"></i> PERSONEL KADROSUNA ALINDI</td>`;
            setTimeout(() => {
                personnel.push({ id: Date.now(), name: app.name, dept: app.pos, salary: 30000, perf: 50 });
                applications = applications.filter(x => x.id !== id); renderApplications(); renderPersonnel(); showBanner(`${app.name} ekibe katıldı!`);
            }, 1000);
        }
        function rejectApp(id, btnElement) {
            showConfirm("Başvuru Reddi", "Emin misiniz?", (confirmed) => {
                if(confirmed) {
                    const app = applications.find(x => x.id === id); if(app) addLog(`Başvuru Reddi: ${app.name}`, "Admin", "danger", "Reddedildi");
                    const row = btnElement.closest('tr'); row.classList.add('blocked-row'); row.innerHTML = `<td colspan="5" style="text-align:center; color:red; font-weight:bold;"><i class="fas fa-ban"></i> BAŞVURU REDDEDİLDİ</td>`;
                    setTimeout(() => { applications = applications.filter(x => x.id !== id); renderApplications(); }, 1000);
                }
            });
        }
        function renderLan() {
            const tbody = document.getElementById('lan-list'); tbody.innerHTML = "";
            lanDevices.forEach(d => {
                let statusBadge = d.status === 'online' ? `<span class="badge badge-online">ONLINE</span>` : `<span class="badge badge-offline">OFFLINE</span>`;
                const tr = document.createElement('tr');
                tr.innerHTML = `<td style="font-weight:600;"><i class="fas fa-desktop" style="color:#94a3b8; margin-right:5px;"></i> ${d.name}</td><td>${d.ip}</td><td style="font-family:monospace; color:#64748b;">${d.mac}</td><td>${d.ping}</td><td>${statusBadge}</td><td><button class="btn btn-sm btn-warning" onclick="showAlert('Bilgi', 'Hız limiti: 10mbps')"><i class="fas fa-gauge-high"></i></button> <button class="btn btn-sm btn-danger" onclick="kickDevice(${d.id}, this)"><i class="fas fa-ban"></i></button></td>`;
                tbody.appendChild(tr);
            });
            document.getElementById('stat-lan').innerText = lanDevices.filter(x => x.status === 'online').length;
        }
        function scanNetwork() {
            const btn = document.getElementById('scan-btn'); const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Taranıyor...'; btn.disabled = true;
            setTimeout(() => {
                const newId = Date.now(); const randomLast = Math.floor(Math.random() * 254) + 2;
                const newDevice = { id: newId, name: "Unknown-Device-" + randomLast, ip: "192.168.1." + randomLast, mac: "XX:XX:XX:XX:XX", ping: Math.floor(Math.random() * 100) + "ms", status: "online" };
                lanDevices.push(newDevice); renderLan(); addLog(`Ağ Taraması: Yeni Cihaz`, "System Bot", "warning", "Bulundu"); showBanner("Taramada yeni cihaz bulundu: " + newDevice.ip);
                btn.innerHTML = originalText; btn.disabled = false;
            }, 2000);
        }
        function kickDevice(id, btnElement) {
            showConfirm("Erişim Engelleme", "Bu cihazı engellemek istiyor musunuz?", (confirmed) => {
                if(confirmed) {
                    const dev = lanDevices.find(x => x.id === id); if(dev) addLog(`LAN Engelleme: ${dev.ip}`, "Admin", "danger", "Banlandı");
                    const row = btnElement.closest('tr'); row.classList.add('blocked-row'); row.innerHTML = '<td colspan="6" class="blocked-text"><i class="fas fa-ban"></i> ERİŞİM ENGELLENDİ</td>';
                    setTimeout(() => { lanDevices = lanDevices.filter(x => x.id !== id); renderLan(); }, 1000);
                }
            });
        }
        function unlockSecuredArea() {
            const pass = document.getElementById('admin-pass').value;
            if(pass === "admin123") {
                addLog(`Güvenli Alan Erişimi`, "Admin", "success", "Yetkilendirildi");
                document.getElementById('auth-error').style.display = 'none';
                document.getElementById('security-lock').style.opacity = '0';
                setTimeout(() => { document.getElementById('security-lock').style.display = 'none'; document.getElementById('secured-content').style.filter = 'none'; document.getElementById('secured-content').style.pointerEvents = 'auto'; }, 500);
            } else {
                addLog(`Yetkisiz Giriş Denemesi`, "Bilinmeyen IP", "danger", "Engellendi");
                document.getElementById('auth-error').style.display = 'block'; document.getElementById('admin-pass').value = "";
            }
        }
        function addNote() {
            const text = document.getElementById('note-input').value; const time = document.getElementById('note-time').value;
            if(!text) { showAlert("Uyarı", "Lütfen bir not giriniz!"); return; }
            notes.push({ id: Date.now(), text: text, targetTime: time ? new Date(time).getTime() : null, notified: false });
            addLog(`Yeni Görev/Not`, "Admin", "success", "Eklendi");
            renderNotes(); document.getElementById('note-input').value = ""; showBanner("Not başarıyla eklendi.");
        }
        function renderNotes() {
            const container = document.getElementById('notes-list'); container.innerHTML = "";
            notes.forEach(n => {
                let timeStr = n.targetTime ? new Date(n.targetTime).toLocaleString('tr-TR') : 'Zaman Ayarı Yok';
                let statusColor = n.notified ? 'var(--success)' : 'var(--primary)'; let statusText = n.notified ? 'Bildirim Yapıldı' : 'Beklemede';
                const div = document.createElement('div'); div.className = 'note-card'; div.style.borderLeftColor = statusColor;
                div.innerHTML = `<p style="font-weight:600; font-size:1.1rem; margin-bottom:8px;">${n.text}</p><div style="font-size:0.85rem; color:#64748b; display:flex; align-items:center; gap:5px;"><i class="far fa-clock"></i> ${timeStr}</div><div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center;"><span style="font-size:0.75rem; font-weight:bold; color:${statusColor}">${statusText}</span><button onclick="notes = notes.filter(x => x.id !== ${n.id}); renderNotes();" style="border:none; background:none; color:var(--danger); cursor:pointer;"><i class="fas fa-trash"></i> Sil</button></div>`;
                container.appendChild(div);
            });
        }

        setInterval(() => {
            const now = new Date(); document.getElementById('clock').innerText = now.toLocaleTimeString('tr-TR');
            notes.forEach(note => { if(note.targetTime && !note.notified && now.getTime() >= note.targetTime) { showBanner("Hatırlatma", note.text); note.notified = true; renderNotes(); } });
        }, 1000);

        window.onload = function() { renderPersonnel(); renderApplications(); renderLan(); renderLogs(); }
    </script>
</body>
</html>
